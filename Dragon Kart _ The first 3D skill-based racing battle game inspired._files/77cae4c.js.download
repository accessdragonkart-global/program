(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{1247:function(e,t,r){var content=r(1389);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(35).default)("284c9fd0",content,!0,{sourceMap:!1})},1248:function(e,t,r){var content=r(1391);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(35).default)("435a0648",content,!0,{sourceMap:!1})},1388:function(e,t,r){"use strict";r(1247)},1389:function(e,t,r){var n=r(34)((function(i){return i[1]}));n.push([e.i,".drawer-market-navigation .drk-drawer-content{padding-top:1rem;padding-bottom:1rem;padding-left:0.125rem;padding-right:0.125rem}.drawer-market-navigation .market-sidebar{height:calc(100vh - 5.75rem);overflow-y:auto}.market-header{top:calc(var(--header-height) + .125rem)}",""]),n.locals={},e.exports=n},1390:function(e,t,r){"use strict";r(1248)},1391:function(e,t,r){var n=r(34)((function(i){return i[1]}));n.push([e.i,".market-header[data-v-5127ae00]{--market-navigation-bar-bg:#fcfdff}.dark .market-header[data-v-5127ae00]{--market-navigation-bar-bg:var(--color-gray-600)}.market-header[data-v-5127ae00]{background-color:var(--market-navigation-bar-bg);}.market-header__nav[data-v-5127ae00]{max-width:calc(100% - 3.25rem);overflow-x:auto;padding-left:0px}@media (min-width: 1024px){.market-header__nav[data-v-5127ae00]{padding-left:2.5rem}}.market-redeem-figures[data-v-5127ae00]{--redeem-figure-bg:#fcfdff}.dark .market-redeem-figures[data-v-5127ae00]{--redeem-figure-bg:#272f43}.market-redeem-figures button[data-v-5127ae00]{margin-left:0.375rem;margin-right:0.375rem;display:flex;width:100%;align-items:center;justify-content:center;border-radius:0.25rem;padding-top:0.5rem;padding-bottom:0.5rem;padding-left:0.5rem;padding-right:0.5rem;font-size:0.875rem;line-height:1.25rem;--tw-text-opacity:1;color:rgb(104 108 142 / var(--tw-text-opacity))}.market-redeem-figures button[data-v-5127ae00]:hover{background-color:var(--color-bg-secondary)}@media (min-width: 1024px){.market-redeem-figures button[data-v-5127ae00]{width:auto;padding-left:2.25rem;padding-right:2.25rem;font-size:1rem;line-height:1.5}}.market-redeem-figures button[data-v-5127ae00]{background-color:var(--redeem-figure-bg);}.market-redeem-figures button[data-v-5127ae00]:last-child{margin-right:0px}.market-redeem-figures button[data-v-5127ae00]:first-child{margin-left:0px}.market-redeem-figures button.actived[data-v-5127ae00]{background-color:var(--color-primary);--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity))}",""]),n.locals={},e.exports=n},1637:function(e,t,r){"use strict";r.r(t);r(13),r(30),r(14),r(11),r(15),r(16);var n=r(4),o=r(1),l=(r(1182),r(71),r(32),r(67),r(31),r(1212)),c=r(1165),d=r(1166),m=r(1167),f=r(1213),h={},v=r(19),y=Object(v.a)(h,(function(){return(0,this._self._c)("div",[this._v("Redeems list")])}),[],!1,null,null,null).exports,x=r(1143),w=r.n(x),k=r(1187),C=r.n(k),O=r(1188),T=r.n(O),_=r(0),F=r(25);function P(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function j(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?P(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):P(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var B={layout:"market",head:function(){return{title:"Marketplace - Dragon Kart - The first 3D skill-based racing battle game inspired."}},fetch:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,o,l,c,d,m,f,h,v,y,x,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.$route.query,n=r.type,r.publicSaleType,o=r.status,l=void 0===o?_.u.ON_SALE:o,c=r.orderBy,d=r.displayPriceFrom,m=r.displayPriceTo,f=r.levelFrom,h=r.levelTo,v=r.rarities,y=void 0===v?[]:v,(x=n?n.toUpperCase():"ALL")!==_.r.toUpperCase()){t.next=7;break}return t.next=5,e.fetchRedeems();case 5:t.next=10;break;case 7:return w={status:l,orderBy:c,displayPriceFrom:d,displayPriceTo:m,levelFrom:f,levelTo:h,rarities:"string"==typeof y?[y]:y,page:1,limit:_.n.ITEMS_CATEGORY,itemType:_.j[x]!==_.j.ALL?_.j[x]:void 0},t.next=10,e.$store.dispatch("order/getOrders",w);case 10:case"end":return t.stop()}}),t)})))()},asyncData:function(e){var t=e.query,r=t.type,n=t.publicSaleType;return{category:r?r.toUpperCase():"ALL",publicSaleType:n=n?n.toUpperCase():"COMBOBOX"}},components:{SidebarFilter:l.a,NavigationBar:f.a,CharacterCard:c.a,RedeemCard:d.a,PropertyCard:m.a,RedeemsList:y,IconFilter:w.a,IconBox:C.a,IconMaterialNft:T.a},data:function(){return{REDEEM_TYPE:_.r,PUBLIC_SALE_TYPE:_.o,loading:!1,showFilter:!1,paging:{limit:_.n.ITEMS_CATEGORY,page:1},publicSaleType:"",filter:{status:null,orderBy:null,displayPriceFrom:0,displayPriceTo:0,levelFrom:null,levelTo:null,rarities:[]},tmpFilter:{}}},computed:j(j(j(j({},Object(F.c)("marketplace",["materialNfts","boxNfts"])),Object(F.c)("order",["orders"])),Object(F.e)("order",["pagination"])),{},{isRedeems:function(){return this.category===_.r.toUpperCase()},isBoxNfts:function(){return"COMBOBOX"===this.publicSaleType},isMaterialNfts:function(){return"MATERIAL"===this.publicSaleType},hasData:function(){return!!(this.isRedeems&&this.isBoxNfts&&this.boxNfts.length>0)||(!!(this.isRedeems&&this.isMaterialNfts&&this.materialNfts.length>0)||this.orders.length>0)},filterable:function(){return!this.isRedeems},orderUrl:function(){return function(e){var t=e.id,r=e.item,n="",o="";return r&&r.id&&(console.log("hasitem"),r.itemType===_.j.CHARACTERS?n="characters":r.itemType===_.j.CARS?n="cars":r.itemType===_.j.WEAPONS&&(n="weapons"),o="?item=".concat(r.id)),n&&(o?o+="&type=".concat(n):o="?type=".concat(n)),"/order/".concat(t).concat(o)}},materialUrl:function(){return function(e){return"/material/".concat(e.batchSaleId,"/buy?id=").concat(e._id,"&cate=").concat(e.cate.toLowerCase())}}}),watch:{"$route.query":{handler:function(e){var t=e.type,r=e.publicSaleType,n=e.status,o=void 0===n?_.u.ON_SALE:n,l=e.orderBy,c=e.displayPriceFrom,d=e.displayPriceTo,m=e.levelFrom,f=e.levelTo,h=e.rarities,v=t?t.toUpperCase():"ALL";this.publicSaleType=r?r.toUpperCase():"COMBOBOX",this.filter.status=o,this.filter.orderBy=l,this.filter.displayPriceFrom=c,this.filter.displayPriceTo=d,this.filter.levelFrom=m,this.filter.levelTo=f,this.filter.rarities="string"==typeof h?[h]:h,v===_.r.toUpperCase()?v!==this.category&&(this.category=v,this.fetchRedeems()):(this.paging.page=1,this.category=v,this.fetchOrders())},immediate:!0,deep:!0}},created:function(){this.RARITY_TYPES=Object.freeze(_.q)},methods:j(j(j({},Object(F.b)("marketplace",["getMaterialNfts","getBoxNfts"])),Object(F.b)("order",["getOrders"])),{},{fetchRedeems:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,Promise.all([e.getBoxNfts(),e.getMaterialNfts()]);case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:return t.prev=8,e.loading=!1,t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[0,6,8,11]])})))()},fetchOrders:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,r=j(j({itemType:_.j[e.category]!==_.j.ALL?_.j[e.category]:void 0},e.filter),e.paging),t.next=5,e.getOrders(r);case 5:t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:return t.prev=9,e.loading=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[0,7,9,12]])})))()},changePublicSaleType:function(e){this.$router.push({path:this.$route.path,query:j(j({},this.$route.query),{},{publicSaleType:e})})},changeFilter:function(filter){var e=filter.status,t=filter.orderBy,r=filter.displayPriceFrom,n=void 0===r?void 0:r,o=filter.displayPriceTo,l=filter.levelFrom,c=filter.levelTo,d=filter.rarities;this.$router.push({path:this.$route.path,query:j(j({},this.$route.query),{},{status:e,orderBy:t,displayPriceFrom:n,displayPriceTo:o,levelFrom:l,levelTo:c,rarities:d})})},changeTmpFilter:function(filter){this.tmpFilter=filter},submitFilter:function(){var e=this.tmpFilter,t=e.status,r=e.orderBy,n=e.displayPriceFrom,o=void 0===n?void 0:n,l=e.displayPriceTo,c=e.levelFrom,d=e.levelTo,m=e.rarities;this.showFilter=!1,this.$router.push({path:this.$route.path,query:j(j({},this.$route.query),{},{status:t,orderBy:r,displayPriceFrom:o,displayPriceTo:l,levelFrom:c,levelTo:d,rarities:m})})},changePagination:function(data){this.paging.page=data+1,this.fetchOrders()}})},S=(r(1388),r(1390),Object(v.a)(B,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"relative flex items-start min-h-full"},[t("SidebarFilter",{staticClass:"hidden lg:block",class:{"pointer-events-none":!e.filterable,"opacity-40":!e.filterable},attrs:{info:e.filter},on:{change:e.changeFilter}}),e._v(" "),t("div",{staticClass:"grow pb-24 xl:pb-32"},[t("div",{staticClass:"market-header flex items-center shadow sticky z-header top-0 overflow-x-auto max-w-[100vw] md:max-w-[calc(100vw - 240px)]"},[t("div",{staticClass:"lg:hidden p-2 bg-inherit"},[t("button",{staticClass:"p-2 rounded flex items-center text-xl bg-[#F6F7FB] dark:bg-fill-base !text-primary",class:{"opacity-40":!e.filterable},attrs:{disabled:!e.filterable},on:{click:function(t){e.showFilter=!0}}},[t("IconFilter",{staticClass:"icon icon-path-fill"})],1)]),e._v(" "),t("NavigationBar",{staticClass:"market-header__nav"})],1),e._v(" "),t("div",{staticClass:"py-6 w-screen lg:w-auto"},[e.loading||e.$fetchState.pending?t("div",{staticClass:"p-10 flex items-center justify-center"},[t("VSpinner",{attrs:{size:"6rem"}})],1):[e.isRedeems?t("div",{staticClass:"market-redeem-figures flex px-3 xl:px-10 py-2 mb-2.5 lg:mb-4"},[t("button",{class:{actived:e.isBoxNfts},on:{click:function(t){return e.changePublicSaleType("combobox")}}},[t("span",{staticClass:"text-xl lg:text-2xl mr-1"},[t("IconBox",{staticClass:"icon-path-inherit"})],1),e._v("\n            Boxes ("+e._s(e.boxNfts.length)+")")]),t("button",{class:{actived:e.isMaterialNfts},on:{click:function(t){return e.changePublicSaleType("material")}}},[t("span",{staticClass:"text-2xl mr-1"},[t("IconMaterialNft",{staticClass:"icon-path-inherit"})],1),e._v("\n            Material NFT ("+e._s(e.materialNfts.length)+")\n          ")])]):e._e(),e._v(" "),t("div",{staticClass:"px-3 pt-2 xl:px-10 mb-6 grid grid-cols-2 md:flex md:flex-wrap md:justify-center gap-3 md:gap-6"},[e.isRedeems?[e.isBoxNfts?e._l(e.boxNfts,(function(r){return t("RedeemCard",{key:r.id,staticClass:"w-full md:max-w-[260px]",attrs:{to:e.materialUrl(r),image:r.image,category:r.cate,name:r.name,kart:r.kart,point:r.point}})})):e._e(),e._v(" "),e.isMaterialNfts?e._l(e.materialNfts,(function(r){return t("RedeemCard",{key:r.id,staticClass:"w-full md:max-w-[260px]",attrs:{to:e.materialUrl(r),image:r.image,category:r.cate,name:r.name,kart:r.kart,point:r.point}})})):e._e()]:[e._l(e.orders,(function(r){return[t("CharacterCard",{key:r.id,staticClass:"w-full md:max-w-[260px]",attrs:{to:e.orderUrl({id:r.id,item:r.item||{}}),image:r.image,level:r.level,rarity:r.rarity,category:r.cate,name:r.name,price:r.price}})]}))]],2),e._v(" "),t("div",{staticClass:"px-3 pt-2 xl:px-10 mb-6"},[e.hasData?e._e():t("VNoData")],1),e._v(" "),!e.isRedeems&&e.hasData&&e.pagination.totalPage>1?t("div",{staticClass:"px-3 lg:px-20 xl:px-6 py-2.5"},[t("VPaging",{attrs:{skipPage:e.paging.page-1,pageSize:e.paging.limit,total:e.pagination.total},on:{change:e.changePagination}})],1):e._e()]],2)]),e._v(" "),t("VDrawer",{attrs:{size:"100vw",header:!1,"component-class":{"drawer-market-navigation":!0}},on:{close:function(t){e.showFilter=!1},cancel:function(t){e.showFilter=!1}},model:{value:e.showFilter,callback:function(t){e.showFilter=t},expression:"showFilter"}},[t("div",{staticClass:"drawer-market-navigation",attrs:{slot:"content"},slot:"content"},[t("SidebarFilter",{attrs:{info:e.filter},on:{change:e.changeTmpFilter}}),e._v(" "),t("div",{staticClass:"flex items-center py-2 px-4"},[t("VButton",{staticClass:"w-full mx-[0.21875rem] ml-0",attrs:{size:"sm",variant:"cancel"},on:{click:function(t){e.showFilter=!1}}},[e._v("Close")]),e._v(" "),t("VButton",{staticClass:"w-full mx-[0.21875rem] mr-0",attrs:{size:"sm"},on:{click:e.submitFilter}},[e._v("Apply")])],1)],1)])],1)}),[],!1,null,"5127ae00",null));t.default=S.exports;installComponents(S,{VSpinner:r(177).default,VNoData:r(1147).default,VPaging:r(1158).default,VButton:r(176).default,VDrawer:r(551).default})}}]);